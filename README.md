# 通信ソフトウェア論1の最終成果物
## 技術的説明の文書

- 全体として、どのような機能性を提供するWebサイトであるのか
クイズや計算問題などを出題し，回答が入力されると正誤判定を行い，得点やランクなどの指標を提供することで競技性を持たせたインタラクティブなWebサイトである．
具体的にはクイズ，計算問題，タイピング速度測定を提供する．これに加えてJavascriptの機能を利用した関数計算機を提供する．

- 次の各項目について、Webの特性を踏まえて特に工夫した点を説明する．
1. HTML：常にvalidationチェックを行い，意図しない動作をしないように気をつけた．<div>タグを用いて構造をかたまりごとに扱えるようにし，複数のコンテンツで同じCSSなどを利用できるように工夫した．
（関数計算機p4はp4.css,p4.jsにのみ依存しており，ユーザがソースコードをローカル環境に入れても簡単に利用できるようにした）

2. CSS：複数のページで同じCSSファイルを利用し，全体で同じテーマのデザインで統一した．ボタンなどのインタラクティブな操作が可能なものには，カーソルを合わせると大きくなったり色が変化したりするようにして，わかりやすくした．

3. JavaScript：計算問題とタイピング速度測定では問題がランダムかつ難易度変更できるように設計した．タイマのカウンタ値によって自動的に行う制御や，入力結果と正しい回答の比較処理では多くのバグが発生したためバグ修正に苦労した．問題はJavascriptによってcreateElement，setAttributeを使い動的に生成したほか，問題ごとに入力がスムーズに行えるようにカーソルが入力欄に自動的にあうようにしたり，コピーアンドペーストによる不正を防止したり，スコアと難易度からランクを計算した．関数計算機はJavascriptのMathオブジェクトを利用して関数計算を可能とするもので，入力した計算式が表示されるように演算途中で入力をMapメソッドに格納し，最終結果を出力するときにMapから文字列と計算結果が呼び出されるようにするところを工夫した．コンテンツとしては活かしきれなかったアイディアとして時間をかけて工夫して作った，Canvasのアニメーションやスクロール量に応じた背景色変更などの要素は，無かったことにしたく無かったので”実験用HTML”として残した．

4. 外部API：Google Chart APIを利用した．問題の正解数を集計したものをグラフ表示するために利用しようと探し見つけた．属性と数値の組みを設定するとそれに対応したさまざまな形状のグラフを返してくる．また，気象庁の天気予報をJSONで返してくれるAPIのようなものを利用し，indexページに天気予報を作成した．気象庁の天気コードやJSONの構造を扱うのに苦労した．

5. 自作サーバ側プログラム：PHPを自作サーバ側プログラムとした．Javascriptからサーバ上のPHPにデータを渡すところの仕組みを理解するのに苦労した．クイズのプログラムでは正答数scoreをJavascriptでJSON形式に変換しPHPでデータベースに登録（INSERT）し，SELECT COUNT()を利用してデータベース内の正答数ごとの人数を取り出し，fetchall()で全てをJavascriptに返している．JavascriotではGoogle Chart APIにて扱えるように変数を整形し，グラフを出力している．

6. サーバ側DB：最初に設計した時に，データベース内にscore:NULLのタプルが存在したため，データベース内にNULLのタプルが存在しないと正しくデータ処理できないことと，PHPであらかじめ変数の範囲が決まっていないため，scoreが0〜5の場合を一つ以上ずつINSERTしないとグラフが出力されないという欠陥が時間の都合上取り除けなかった．キー値となるIDはレコードが追加されるごとに自動的にインクリメントされるように設定し，ユーザがデータベース上の処理を意識することなく利用できるようにした．